üßæ FEATURE REQUIREMENTS
1Ô∏è‚É£ Order Creation & Status Flow

Implement a New Rental Order page with the following lifecycle:

NEW ‚Üí QUOTATION ‚Üí QUOTATION SENT ‚Üí SALE ORDER ‚Üí CONFIRMED ‚Üí INVOICED ‚Üí RETURNED / LATE


When a new order is created ‚Üí status = DRAFT (Quotation)

Clicking Send ‚Üí status = SENT

Clicking Confirm ‚Üí status = SALE

Clicking Create Invoice ‚Üí creates invoice + status = INVOICED

When rental ends ‚Üí RETURNED or LATE

2Ô∏è‚É£ Header Actions (Top Buttons)

Implement buttons with role-based behavior:

New Rental Order

Send (only if status = DRAFT)

Confirm (only if status = SENT)

Print (generate printable order summary)

Create Invoice (only if status = SALE)

Buttons should be enabled/disabled based on order status.

3Ô∏è‚É£ Order Details Section

Implement editable fields:

Customer name

Invoice Address

Delivery Address

Rental Period:

Start Date

End Date

Order Date (auto-filled)

These fields should be stored in the orders table.

4Ô∏è‚É£ Order Line (Products Table)

Implement an order line table with:

Field	Description
Product	Rental product
Quantity	Units rented
Unit	Units / Days
Unit Price	Rental price
Taxes	Optional
Amount	Auto-calculated

Logic:

Amount = Quantity √ó Unit Price √ó Rental Duration


Support multiple products

Prevent overbooking using date-overlap logic

Auto-update totals when quantity or date changes

5Ô∏è‚É£ Pricing & Calculation Logic

Implement calculations for:

Untaxed Amount

Discounts

Coupon codes

Shipping charges

Down payment / deposit

Taxes

Final Total:

Total = Untaxed + Taxes + Shipping ‚àí Discount ‚àí Downpayment


All calculations should happen:

In frontend (for instant UI feedback)

Re-validated in backend (for security)

6Ô∏è‚É£ Terms & Conditions

Add a clickable Terms & Conditions link

Terms should come from a separate page

Store accepted terms flag in database

7Ô∏è‚É£ Backend API Requirements

Create APIs for:

POST /orders ‚Üí Create quotation

PATCH /orders/:id/send

PATCH /orders/:id/confirm

POST /invoices/:orderId

PATCH /orders/:id/return

Each API should:

Use JWT authentication

Enforce role-based access (Vendor/Admin)

Use Prisma for DB access

Validate order state transitions

8Ô∏è‚É£ Database Logic (Prisma)

Use Prisma models for:

Order

OrderItem

Product

Invoice

Ensure:

One order can have many order items

Order items track rental start & end dates

Inventory updates on confirm & return

Late fee calculation if return date exceeds expected date

9Ô∏è‚É£ Frontend Implementation (React)

Use:

React Hook Form for form handling

Zustand for global order/cart state

Axios with JWT interceptor

Conditional rendering for buttons

Optimistic UI updates

üîê Security & Validation

Do not allow invalid status transitions

Vendor can only manage their own orders

Customer cannot modify order once confirmed

Backend must re-calculate totals to prevent manipulation

üéØ EXPECTED OUTPUT

React components for New Order Page

Express controllers for order lifecycle

Prisma queries for selection & updates

Clean separation of concerns

Production-ready code